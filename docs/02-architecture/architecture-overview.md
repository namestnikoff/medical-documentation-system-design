# Обзор архитектуры системы

## Общее описание

Система строится по сервисно-ориентированной архитектуре: компоненты независимы, общаются через REST API, интегрируются с обязательными внешними государственными сервисами (ЕГИСЗ, ЕСИА). Все данные хранятся централизованно.

### Внешние зависимости

- **ЕГИСЗ** — приём и отправка медицинских документов (СЭМД)
- **ЕСИА** — государственная аутентификация пользователей (врачи, пациенты, администраторы)
- **Федеральные справочники** (МКБ-10, ФРМО, ФРМР, ЖНВЛП) — для корректного обмена данными в стандартах

Система обеспечивает быструю запись на приём, оформление документов, подпись, автоматическое формирование отчётов, создание и хранение СЭМД.

---

## Модули системы

Проект построен на модульной архитектуре, где каждый модуль отвечает за отдельную бизнес-логику и функциональность.

| Модуль                      | Ответственность                                 |
|-----------------------------|-------------------------------------------------|
| Пациенты                    | CRUD, поиск, история болезни                    |
| Расписания                  | График работы врача, запись на приём            |
| Приёмы                      | Ведение приёма и назначений                    |
| Медицинские документы       | Формирование, подписание, отправка              |
| Пользователи                | Роли, аутентификация, ЕСИА                     |
| Платные услуги              | Учёт, оплата, ДМС                              |
| Статистика                  | Автоматизация отчётов                           |
| Аудит                       | Логирование действий                            |
| Интеграция                  | ЕГИСЗ, ЕСИА, федеральные справочники           |

---

## Сущности и модели данных

Система оперирует следующими ключевыми сущностями:

- **Пациент** — данные личности, история обращений
- **Врач** — профиль, специализация, расписание
- **Запись на приём** — дата, время, статус
- **Медицинский документ** — шаблоны, результаты обследований
- **Пользователь** — для доступа и безопасности

Связи между сущностями обеспечивают целостность и полноту данных. Модель данных оптимизирована для быстрого доступа и масштабирования.

!Диаграмма сущностей

---

## Контейнеры и интеграционные слои

Архитектура разделена на несколько контейнеров:

- **Фронтенд** — пользовательский интерфейс
- **API Gateway** — централизованный вход, маршрутизация и аутентификация
- **Сервисы приложений** — отдельные микросервисы для логики модулей
- **Хранилище данных** — реляционные и NoSQL базы
- **Интеграционные сервисы** — обработка асинхронных сообщений, интеграция с внешними системами

!Диаграмма контейнеров

---

## Пример типового процесса: запись пациента на приём

Для иллюстрации типовых процессов подготовлен пример сквозного сценария записи пациента на приём, включая авторизацию и бронирование слота.

### BPMN диаграмма

!BPMN диаграмма записи

Исходник BPMN

### Детализация в диаграммах последовательностей

- Авторизация пациента
- Бронирование записи

