# Функциональные требования

## Обзор

Функциональные требования описывают основные функции системы, необходимые для автоматизации работы поликлинической службы.

## Ключевые функциональные модули

### 1. Управление пациентами

**FR-001: Регистрация и поиск пациентов**
- Регистрация нового пациента с созданием электронной медицинской карты (ЭМК)
- Ввод демографических данных (ФИО, дата рождения, СНИЛС, полис ОМС)
- Поиск пациентов по различным критериям с поддержкой нечеткого поиска
- Полнотекстовый поиск по содержимому медицинской карты
- Просмотр истории болезни пациента

### 2. Управление расписанием и записью

**FR-002: Расписание врачей и запись на прием**
- Формирование расписания приемов врачей (день/неделя/месяц)
- Запись пациентов на прием с выбором врача и времени
- Указание типа приема (ОМС/платный, первичный/повторный)
- Отправка уведомлений пациентам (SMS/Email)
- Отмена и перенос записи

### 3. Ведение приемов

**FR-003: Оформление приема пациента**
- Открытие приема и связь с электронной медицинской картой
- Ввод жалоб, объективного осмотра, жизненных показателей
- Постановка диагноза с кодом МКБ-10
- Назначение лечения (препараты, процедуры, режим)
- Направления на обследования и к специалистам
- Выдача электронного листка нетрудоспособности
- Закрытие приема с формированием медицинского документа

**FR-004: Назначения и рецепты**
- Поиск лекарственных препаратов по справочнику
- Указание дозировки и схемы приема
- Автоматическая проверка взаимодействия препаратов и аллергий
- Формирование электронных и печатных рецептов

### 4. Управление медицинскими документами

**FR-005: Создание СЭМД**
- Автоматическая генерация структурированных электронных медицинских документов (СЭМД)
- Поддержка формата CDA R2 согласно требованиям Минздрава РФ
- Валидация структуры документа перед сохранением
- Присвоение уникального идентификатора

**FR-006: Электронная подпись документов**
- Подписание документов усиленной квалифицированной электронной подписью (УКЭП)
- Проверка валидности и срока действия сертификата ЭП
- Блокировка редактирования документа после подписания

**FR-007: Поиск и версионирование документов**
- Полнотекстовый поиск по содержимому документов (диагнозы, назначения, жалобы)
- Фильтрация по типу, дате, врачу, пациенту
- Сохранение версий документов с историей изменений

### 5. Интеграция с ЕГИСЗ

**FR-008: Передача СЭМД в федеральное хранилище**
- Автоматическая отправка подписанных документов в ЕГИСЗ
- Валидация документа перед отправкой
- Получение подтверждения о приеме
- Механизм повторной отправки при ошибках
- Мониторинг статуса обработки документов

### 6. Учет платных услуг

**FR-009: Оформление и оплата платных услуг**
- Выбор услуг из электронного прейскуранта
- Расчет стоимости с учетом скидок
- Формирование договоров на оказание платных услуг
- Прием оплаты (наличные, карта, безналичный расчет)
- Выдача чеков и справок для налогового вычета

**FR-010: Учет договоров ДМС**
- Ведение договоров добровольного медицинского страхования
- Проверка лимитов по договору
- Формирование и отправка реестров страховым компаниям

### 7. Медицинская статистика

**FR-011: Сбор и формирование отчетности**
- Автоматический сбор статистических данных из приемов и документов
- Формирование отчетов различной периодичности (дневные, месячные, годовые)
- Отчеты по формам Росстата (форма 30, форма 47)
- Расчет показателей деятельности поликлиники
- Экспорт в различных форматах (Excel, PDF)

**FR-012: Контроль качества документации**
- Автоматическая проверка заполнения обязательных полей
- Валидация кодов МКБ-10
- Уведомление о необходимости корректировки

### 8. Администрирование

**FR-013: Управление пользователями и правами доступа**
- Создание и управление учетными записями пользователей
- Назначение ролей (врач, регистратор, администратор, бухгалтер, КМС)
- Настройка прав доступа к функциям системы
- Интеграция с ЕСИА (Госуслуги) для аутентификации

**FR-014: Справочники**
- Использование актуальных справочников МКБ-10, лекарственных препаратов, медицинских услуг
- Получение обновлений федеральных справочников из централизованных источников
- Ведение локальных справочников (прейскурант услуг поликлиники, штатное расписание)

**FR-015: Настройка системы**
- Конфигурирование параметров медицинской организации (реквизиты, контакты)
- Настройка параметров интеграций (ЕГИСЗ, платежные системы, ЕСИА)
- Управление шаблонами уведомлений и документов

### 9. Аудит и безопасность

**FR-016: Журнал аудита**
- Полное логирование всех действий с персональными данными (152-ФЗ)
- Фиксация пользователя, даты/времени, IP-адреса, типа операции
- Защита журнала от удаления и изменения
- Хранение журнала минимум 3 года
- Поиск и экспорт данных журнала для проверок

## Приоритизация

### Критический приоритет (MVP)
Система не может функционировать без этих модулей:
- FR-001: Регистрация и поиск пациентов
- FR-003: Ведение приемов
- FR-005: Создание СЭМД
- FR-006: Электронная подпись
- FR-008: Передача в ЕГИСЗ
- FR-013: Управление пользователями и правами доступа
- FR-014: Справочники (базовые: МКБ-10, препараты)
- FR-015: Настройка системы (первичная конфигурация)
- FR-016: Журнал аудита

### Высокий приоритет (Release 1)
Необходимы для полноценной работы поликлиники:
- FR-002: Расписание и запись на прием
- FR-004: Назначения и рецепты
- FR-007: Поиск документов
- FR-009: Платные услуги
- FR-011: Медицинская статистика

### Средний приоритет (Release 2)
Улучшают эффективность работы:
- FR-010: Учет договоров ДМС
- FR-012: Контроль качества документации

## Трассировка требований

Связь бизнес-требований, функциональных и нефункциональных требований:

![Трассировка требований](http://www.plantuml.com/plantuml/proxy?cache=no&src=https://raw.githubusercontent.com/namestnikoff/medical-documentation-system-design/main/docs/01-requirements/diagrams/requirements-traceability.puml)

[Исходный код диаграммы](diagrams/requirements-traceability.puml)

### Основные связи

**Автоматизация документооборота** обеспечивается через:
- Регистрацию пациентов (FR-001)
- Ведение приемов (FR-003)
- Создание СЭМД (FR-005)
- Электронную подпись (FR-006)

**Соответствие законодательству** достигается через:
- Создание документов в формате СЭМД (FR-005)
- Электронную подпись УКЭП (FR-006)
- Интеграцию с ЕГИСЗ (FR-008)

**Безопасность персональных данных** обеспечивается:
- Управлением пользователями и правами (FR-013)
- Полным журналом аудита (FR-016)
- Требованиями к безопасности (NFR-004)

## Нефункциональные требования

Подробно описаны в отдельном документе [non-functional-requirements.md](non-functional-requirements.md).

Кратко:
- **Производительность**: время отклика API < 200ms (95% запросов)
- **Доступность**: uptime ≥ 99.9%
- **Масштабируемость**: поддержка 1500 врачей, 20000 приемов/день
- **Безопасность**: соответствие 152-ФЗ, 323-ФЗ
- **Интеграция**: ЕГИСЗ, платежные системы, ЕСИА

---

**Всего требований**: 16 основных функциональных модулей  
**Критический приоритет**: 9 модулей  
**Высокий приоритет**: 5 модулей  
**Средний приоритет**: 2 модуля  
**Статус**: Утверждено  
**Дата**: 2025-11-08
